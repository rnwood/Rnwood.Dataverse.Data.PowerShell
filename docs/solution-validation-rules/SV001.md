# SV001: Managed Table Include Subcomponents

## Rule Description

Managed table components should not be included in a solution with the "Include Subcomponents" behavior.

## Severity

**Error** - This issue should be fixed before deploying the solution.

## Why This Matters

When you include a managed table (entity) in a solution with "Include Subcomponents" behavior, the solution will include:
- All attributes (fields) of the table
- All relationships
- All forms
- All views
- All other subcomponents

This can cause several problems:

### 1. Customization Conflicts
If the target environment has customizations to the managed table (which is common with standard Dynamics 365 tables or tables from other managed solutions), importing your solution with "Include Subcomponents" can:
- Overwrite existing customizations
- Create dependency conflicts
- Cause upgrade failures

### 2. Solution Bloat
Including all subcomponents when you only need a few specific customizations makes your solution unnecessarily large and complex.

### 3. Upgrade Issues
When the managed solution that owns the table is upgraded, conflicts can arise between:
- The base managed solution's components
- Your solution's copy of those components
- Any customizations in the target environment

## How to Fix

Instead of including the entire table with all subcomponents, use one of these approaches:

### Option 1: Do Not Include Subcomponents
Change the root component behavior to "Do Not Include Subcomponents" or "Include As Shell". Then explicitly add only the specific subcomponents you've customized:
- Add only the forms you've modified
- Add only the views you've created or modified
- Add only the attributes you've added or customized

### Option 2: Use Proper Component Selection
When adding the table to your solution:
1. In the modern solution explorer: Select "Select components" instead of "Include all components"
2. Choose only the specific subcomponents you need
3. This automatically sets the behavior to "Do Not Include Subcomponents"

## Example

**Bad:**
```powershell
# This will include ALL subcomponents of the contact table
Set-DataverseSolutionComponent -Connection $conn -SolutionName MySolution `
    -ComponentType 1 -ComponentId $contactEntityId `
    -IncludeSubcomponents
```

**Good:**
```powershell
# Include the contact table without subcomponents
Set-DataverseSolutionComponent -Connection $conn -SolutionName MySolution `
    -ComponentType 1 -ComponentId $contactEntityId `
    -DoNotIncludeSubcomponents

# Then add only the specific form you customized
Set-DataverseSolutionComponent -Connection $conn -SolutionName MySolution `
    -ComponentType 60 -ComponentId $customFormId
```

## Related Documentation

- [Understanding solution components](https://learn.microsoft.com/en-us/power-apps/maker/data-platform/solutions-overview)
- [Solution layering in Dataverse](https://learn.microsoft.com/en-us/power-platform/alm/solution-layers-alm)
- [Best practices for solution development](https://learn.microsoft.com/en-us/power-platform/alm/solution-concepts-alm)

## See Also

- [SV002: Managed Non-Table Not Customized](SV002.md)
- [SV003: Managed Subcomponent Not Customized](SV003.md)
